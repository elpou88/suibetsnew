===================================
RAILWAY ENVIRONMENT VARIABLES
===================================

CRITICAL: VITE_* variables MUST be set BEFORE building!
Railway injects env vars at runtime, but Vite embeds them at BUILD time.
Set all variables FIRST, then trigger a new deployment.

===================================
REQUIRED VARIABLES (copy to Railway Dashboard → Variables):
===================================

# Core Settings
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# SECURITY: Generate unique values for production!
SESSION_SECRET=<generate-a-random-64-char-string>
ADMIN_PASSWORD=<set-a-secure-admin-password>

# Frontend Configuration (CRITICAL - must be set BEFORE build)
VITE_API_URL=https://suibets.up.railway.app
CORS_ORIGIN=https://suibets.up.railway.app

# Smart Contract Addresses (CRITICAL - must match mainnet deployment)
# These MUST be set before building or betting will fail!
# REDEPLOYED: January 27, 2026 with shared object fix for settlements
VITE_BETTING_PACKAGE_ID=0x936e79b406296551171bc148b0e1fe7d32534c446a93f5a18766569d8cc736a6
VITE_BETTING_PLATFORM_ID=0x94a14c61edc4e51b39775b811f42c8a8af96488005af9179315ddb80389f480b
VITE_SBETS_TOKEN_ADDRESS=0x6a4d9c0eab7ac40371a7453d1aa6c89b130950e8af6868ba975fdd81371a7285::sbets::SBETS

# Backend contract addresses (mirror of VITE_* for server-side)
BETTING_PACKAGE_ID=0x936e79b406296551171bc148b0e1fe7d32534c446a93f5a18766569d8cc736a6
BETTING_PLATFORM_ID=0x94a14c61edc4e51b39775b811f42c8a8af96488005af9179315ddb80389f480b
ADMIN_CAP_ID=0x2b4ace9a99fc6ccc09695cf58b6a317be6f219d76a22e1f099bd505141e270ee

# Blockchain Configuration
SBETS_TOKEN_ADDRESS=0x6a4d9c0eab7ac40371a7453d1aa6c89b130950e8af6868ba975fdd81371a7285::sbets::SBETS
ADMIN_WALLET_ADDRESS=0x20850db591c4d575b5238baf975e54580d800e69b8b5b421de796a311d3bea50
REVENUE_WALLET_ADDRESS=0x20850db591c4d575b5238baf975e54580d800e69b8b5b421de796a311d3bea50

# API Keys
API_SPORTS_KEY=3ec255b133882788e32f6349eff77b21
AI_INTEGRATIONS_OPENAI_API_KEY=<your_openai_key>

# Database (auto-filled by Railway PostgreSQL Plugin)
DATABASE_URL=<Auto-filled by Railway PostgreSQL Plugin>

===================================
WHY BETTING FAILS ON RAILWAY
===================================

ROOT CAUSE: Vite embeds VITE_* environment variables at BUILD time,
not runtime. If these variables are not set when Railway runs 
`npm run build`, the frontend will use fallback/undefined values.

SYMPTOMS:
- Wallet connects successfully
- Betting transactions fail with contract errors
- Console shows undefined contract addresses

SOLUTION:
1. Set ALL environment variables in Railway Dashboard FIRST
2. Trigger a NEW deployment (Railway → Redeploy)
3. The build will now embed correct contract addresses

===================================
SETUP STEPS
===================================

1. Fork/clone repo to GitHub

2. On Railway.app:
   - Click "New Project"
   - Select "Deploy from GitHub repo"
   - Choose your repo

3. Add PostgreSQL:
   - Click "+ Add Service"
   - Select "PostgreSQL"
   - DATABASE_URL auto-populates

4. Set Environment Variables (BEFORE first deploy):
   - Go to project → Variables tab
   - Add ALL variables from this file
   - Replace <placeholders> with real values

5. Deploy:
   - Railway auto-deploys on variable change
   - Or click "Redeploy" to force new build
   - Check /health endpoint when complete

6. Verify:
   - Open your Railway URL
   - Connect wallet
   - Try placing a small bet
   - Check browser console for errors

===================================
TROUBLESHOOTING
===================================

"Betting fails but wallet connects":
→ VITE_* variables were not set during build
→ Solution: Add variables, then Redeploy

"CORS errors":
→ CORS_ORIGIN doesn't match your Railway URL
→ Solution: Update CORS_ORIGIN to exact Railway domain

"Contract not found":
→ Wrong contract addresses
→ Solution: Verify BETTING_PACKAGE_ID and BETTING_PLATFORM_ID

"Database connection failed":
→ PostgreSQL plugin not linked
→ Solution: Add PostgreSQL service, ensure DATABASE_URL exists
